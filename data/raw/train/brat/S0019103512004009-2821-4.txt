The detections of atomic hydrogen, heavy atoms and ions surrounding the extrasolar giant planet (EGP) HD209458b constrain the composition, temperature and density profiles in its upper atmosphere. Thus the observations provide guidance for models that have so far predicted a range of possible conditions. We present the first hydrodynamic escape model for the upper atmosphere that includes all of the detected species in order to explain their presence at high altitudes, and to further constrain the temperature and velocity profiles. This model calculates the stellar heating rates based on recent estimates of photoelectron heating efficiencies, and includes the photochemistry of heavy atoms and ions in addition to hydrogen and helium. The composition at the lower boundary of the escape model is constrained by a full photochemical model of the lower atmosphere. We confirm that molecules dissociate near the 1 Î¼bar level, and find that complex molecular chemistry does not need to be included above this level. We also confirm that diffusive separation of the detected species does not occur because the heavy atoms and ions collide frequently with the rapidly escaping H and H+. This means that the abundance of the heavy atoms and ions in the thermosphere simply depends on the elemental abundances and ionization rates. We show that, as expected, H and O remain mostly neutral up to at least 3Rp, whereas both C and Si are mostly ionized at significantly lower altitudes. We also explore the temperature and velocity profiles, and find that the outflow speed and the temperature gradients depend strongly on the assumed heating efficiencies. Our models predict an upper limit of 8000 K for the mean (pressure averaged) temperature below 3Rp, with a typical value of 7000 K based on the average solar XUV flux at 0.047 AU. We use these temperature limits and the observations to evaluate the role of stellar energy in heating the upper atmosphere.